##并发
曼彻斯特没有os课程但是有并发的课程，结合java课程来讲解，

·互斥与同步
·死锁与饥饿

互斥：不能同时使用的进程
谁来控制哪个进程先用哪个进程后用

同步：协调的推进，共享一个区域，当一个进程写数据时，另一个进程要等待这是互斥。有界空间判断这个是不是满的，是满的就会溢出没有意义，空的也没有意义，无数据可取。


饥饿可能会得到服务，

os就是管理资源的
临界区对应的是临界资源，使用临近资源的代码就叫临界区，其实就是那段code


互斥的需求分析（requirements）：

三个经典的问题解决方法：生产者问题。读写问题，哲学家进餐问题。

死锁的条件，预防，avoid（银行家算法），（预防与避免算法），死锁的检测，死锁避免的算法，安全状态和不安全状态
##并发控制
互斥同步：

Sharing/competing of resource

多个进程之间的同步问题：

处理机时间的分配：其实就是调度的问题


并发控制的难度：1.全局资源的共享，2.资源的分配管理上，3.编程在局部的问题上可能出现错误。


allocate and dealocate resources 分配回收资源

数据资源的保护：result of process must be independent of the speed of execution 
进程执行的结果与其他进程推进的顺序无关，
谁先执行，结果都是确定的，无关性，

Process unaware of each other 

##临界资源，临界区域互斥

互斥使用的资源，涉及到临界区，临界区一次只允许一个进程访问，在一段时间内只允许一段代码进到临近区，例如，对于打印机，一次只给一个进程使用打印机，

例如p1,p2两个进程竞争两个资源ab
现在p1(b) and p2(a）。占用

申请p1（a) and p2(b)

我要的资源在你那，你要的资源在我这里，形成了互相等待的关系，形成了死锁的状态，两个进程永远执行不出来，

进入区。临界区。 退出区
读写是互斥关系，写写也必须是互斥，互斥为了保证数据一致性，临界区就是为了保证数据的完成性

消息队列是不需要互斥的，因为他不是共享区的，

进程间通信可能会引起死锁，三次握手四次挥手，如果中间信息丢失了，会出现超时重发，有协议的约定，


可能会出现饥饿现象，两个进程频繁通信，第三个进程插不上话，就出现饥饿现象，


##互斥

互斥的要求

Only  one process at atime is allowed in the critical section for a resource 
must do so wothout interfering with other processes.

一定要有一个退出区

No deadlock or starvation 不允许出现死锁与饥饿

 a process must not be delayed access to a critial section when there is no other process using it 没有其他进程使用了临界资源。在一个进程申请时不要延迟，立即进入
 
 
 No assumption are made about relatve process speeds or number of processeds不能假设只能多少个进程使用临界资源
 
 
 临界资源是高度共享的，必须在约定的时间来使用临界资源，
 
 
归纳：互斥的条件：空闲让进，忙则等待（Only那段话），有限等待，让全等待。

互斥的方法
Semaphores信号量的方法最重要的（难点）
软件，硬件，信号量，管控，消息传递

1，软件方法：（爱斯基摩人的小屋）
全局共享变量，现在无法实现互斥。


硬件方法：
1屏蔽中断，进程竞争资源，不可以中断，就可以一直执行

一个进程执行，被中断才会释放掉，

假如屏蔽系统的中断就能保证（独占资源）没有竞争，就不会有其他进程来强资源，
中断屏蔽了，假如外界出现异常现象无法中断，屏蔽中断的代价是很高的
在多处理机系统中，屏蔽一个cpu的中断不会阻止另一个处理机来阻止进程，不适合多处理机系统。对系统影响很大，不适合现实的应用

2专用机器指令

Specifical machiner Instructions

一个指令中间有没有中断？
效率不高

##信号量
1互斥信号量：申请释放使用权
2资源信号量：申请归还资源，
s.count>=0的意义：标识还可执行wait而不会阻塞的进程数
s.count<0：标识s.queue队列中阻塞进程的个数

当仅有两个并发进程共享临界资源是，互斥信号量仅能取之0，1，-1，

操作系统内核用系统调用形式提供wait，signal，临界区以前用wait，临界区以后用signal

操作系统中的pv操作就是对信号量的操作


实践证明，信号量方法是高效的

系统/应用程序：
写程序要知道控制临界区的使用。

##生产者/消费者问题

一个或多个生产者产生数据并且把数据放到了buffer（缓存）。
简化：一个消费者一次取一条数据，
只允许一次一个生产者或一个消费者进入buffer访问取数据

任务要求
1.buffer不能并行操作，即某个时刻只允许一个实体操作

2.


